## Aave v3 Base Activation

- ID: 299
- Proposer: [0xf71fc92e2949ccF6A5Fd369a0b402ba80Bc61E02](https://etherscan.io/address/0xf71fc92e2949ccF6A5Fd369a0b402ba80Bc61E02)
- Targets: [0x3215225538da1546FE0DA88ee13019f402078942](https://etherscan.io/address/0x3215225538da1546FE0DA88ee13019f402078942#code)
- Executor: [0xEE56e2B3D491590B5b31738cC34d5232F378a8D5](https://etherscan.io/address/0xEE56e2B3D491590B5b31738cC34d5232F378a8D5) (Short executor)
- Simulation: [https://dashboard.tenderly.co/me/simulator/55447827-ef4b-42b3-9a50-23a1ca6e9689](https://dashboard.tenderly.co/me/simulator/55447827-ef4b-42b3-9a50-23a1ca6e9689)

### Subreports

- [Base](/reports/Aave/0xEC568fffba86c094cf06b22134B23074DFE2252c/299_Base_pending_0.md)

<details>
  <summary>Proposal text</summary>

## Simple Summary

This proposal allows the Aave governance to activate the Aave V3 Base pool (3.0.2) by completing all the initial setup and listing WETH, USDbC and cbETH as suggested by the risk service providers (Gauntlet and Chaos Labs) on the [governance forum](https://governance.aave.com/t/arfc-aave-v3-deployment-on-base/13708/10). All the Aave Base V3 addresses can be found in the [aave-address-book](https://github.com/bgd-labs/aave-address-book/blob/main/src/AaveV3Base.sol).

## Motivation

The Base and Coinbase ecosystem is a good opportunity of expansion for Aave, touching into the new user base and exploring fresh use cases.

Aave community has approved the expansion on the [governance forum](https://governance.aave.com/t/arfc-aave-v3-deployment-on-base/13708) and [snapshot](https://snapshot.org/#/aave.eth/proposal/0xa8b018962096aa1fc22446a395d4298ebb6ca10094f35d072fbb02048e3b5eab).

## Specification

The proposal will do the following:

- set risk steward as the risk admin by executing `ACL_MANAGER.addRiskAdmin()`
- set price oracle sentinel with `POOL_ADDRESSES_PROVIDER.setPriceOracleSentinel()`
- list the following assets on Aave V3 on Base: wETH, cbETH, and USDbC.

The table below illustrates the initial suggested risk parameters for each asset, a combination of recommendations provided by Gauntlet and ChaosLabs.

|                          | WETH           | USDbC     | cbETH          |
| ------------------------ | -------------- | --------- | -------------- |
| Isolation Mode           | NO             | NO        | NO             |
| Enable Borrow            | YES            | YES       | YES            |
| Enable Collateral        | YES            | YES       | YES            |
| Emode Category           | eth-correlated | N/A       | eth-correlated |
| Loan To Value            | 80%            | 77%       | 67%            |
| Liquidation Threshold    | 83%            | 80%       | 74%            |
| Liquidation Bonus        | 5%             | 5%        | 7.5%           |
| Reserve Factor           | 15%            | 10%       | 15%            |
| Liquidation Protocol Fee | 10%            | 10%       | 10%            |
| Supply Cap               | 5,000          | 8,000,000 | 1,000          |
| Borrow Cap               | 4,000          | 6,500,000 | 100            |
| Debt Ceiling             | N/A            | N/A       | N/A            |
| uOptimal                 | 80%            | 90%       | 45%            |
| Base                     | 0%             | 0%        | 0%             |
| Slope1                   | 3.8%           | 4%        | 7%             |
| Slope2                   | 80%            | 60%       | 300%           |
| Stable Borrowing         | Disabled       | Disabled  | Disabled       |
| Flashloanable            | YES            | YES       | YES            |
| Siloed Borrowing         | NO             | NO        | NO             |
| Borrowed in Isolation    | NO             | YES       | NO             |

**E-Mode:**

| Category       | Assets included | LT  | LTV | Liquidation Bonus |
| -------------- | --------------- | --- | --- | ----------------- |
| eth-correlated | WETH, cbETH     | 93% | 90% | 2%                |

cbEth adapter: [0x80f2c02224a2E548FC67c0bF705eBFA825dd5439](https://basescan.org/address/0x80f2c02224a2e548fc67c0bf705ebfa825dd5439)

Price oracle sentinel: [0xe34949A48cd2E6f5CD41753e449bd2d43993C9AC](https://basescan.org/address/0xe34949A48cd2E6f5CD41753e449bd2d43993C9AC)

Risk Steward: [0x12DEB4025b79f2B43f6aeF079F9D77C3f9a67bb6](https://basescan.org/address/0x12DEB4025b79f2B43f6aeF079F9D77C3f9a67bb6)

## Security

The proposal execution is simulated within the [tests](https://github.com/bgd-labs/aave-v3-basenet-proposal/blob/main/tests/AaveV3_BaseActivation.t.sol) and the resulting pool configuration is tested for correctness.

The deployed pool and other permissions have been programmatically verified.

In addition, we have also checked the code diffs of the deployed base contracts with the deployed contracts on Ethereum and other networks.

As a matter of caution, the POOL_ADMIN role will be given for the first weeks to the Aave Guardian multisig.

## References

- Implementation: [Base](https://github.com/bgd-labs/aave-v3-basenet-proposal/blob/main/src/contracts/AaveV3_BaseActivation.sol)
- Tests: [Base](https://github.com/bgd-labs/aave-v3-basenet-proposal/blob/main/tests/AaveV3_BaseActivation.t.sol)
- [Snapshot](https://snapshot.org/#/aave.eth/proposal/0xa8b018962096aa1fc22446a395d4298ebb6ca10094f35d072fbb02048e3b5eab)
- [Discussion](https://governance.aave.com/t/arfc-aave-v3-deployment-on-base/13708)

## Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).

</details>

### Checks

#### Reports all state changes from the proposal ✅ Passed

Info:

- State changes:

```diff
# Proxy at `0x49048044D57e1C92A77f79988d21Fa8fAF74E97e` with implementation OptimismPortal at `0x5FB30336A8d0841cf15d452afA297cB6D10877D7`
@@ Slot `0x0000000000000000000000000000000000000000000000000000000000000001` @@
- "0x00000000011188190000000000083f640000000000000000000000003b9aca00"
+ "0x000000000111e01f000000000021f1360000000000000000000000003b9aca00"
@@ Slot `0x0000000000000000000000000000000000000000000000000000000000000001` @@
- "0x00000000011188190000000000083f640000000000000000000000003b9aca00"
+ "0x000000000111e01f000000000021f1360000000000000000000000003b9aca00"
@@ Slot `0x0000000000000000000000000000000000000000000000000000000000000001` @@
- "0x00000000011188190000000000083f640000000000000000000000003b9aca00"
+ "0x000000000111e01f000000000021f1360000000000000000000000003b9aca00"
```

```diff
# ResolvedDelegateProxy at `0x866E82a600A1414e583f7F13623F1aC5d58b0Afa`
@@ Slot `0x00000000000000000000000000000000000000000000000000000000000000cd` @@
- "0x0000000000000000000000000000000000000000000000000000000000006ecd"
+ "0x0000000000000000000000000000000000000000000000000000000000006ece"
```

#### Check stack trace of the proposal ✅ Passed

Info:

- There is no SELFDESTRUCT inside of delegated call

#### Reports all events emitted from the proposal ✅ Passed

Info:

- Events Emitted:
  - Proxy at `0x49048044D57e1C92A77f79988d21Fa8fAF74E97e` with implementation OptimismPortal at `0x5FB30336A8d0841cf15d452afA297cB6D10877D7`
    - `TransactionDeposited(from: 0x977f82a600a1414e583f7f13623f1ac5d58b1c0b, to: 0x4200000000000000000000000000000000000007, version: 0, opaqueData: 0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000021f13600d764ad0b0001000000000000000000000000000000000000000000000000000000006ecd000000000000000000000000ee56e2b3d491590b5b31738cc34d5232f378a8d5000000000000000000000000a9f30e6ed4098e9439b2ac8aea2d3fc26bcebb45000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001cfde000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000244d9a4cbdf00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000bdd1458a6d399c88d4509275e4463485c6c86ef30000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000965786563757465282900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000)`
  - ResolvedDelegateProxy at `0x866E82a600A1414e583f7F13623F1aC5d58b0Afa`
    - `SentMessage(target: 0xa9f30e6ed4098e9439b2ac8aea2d3fc26bcebb45, sender: 0xee56e2b3d491590b5b31738cc34d5232f378a8d5, message: 0xd9a4cbdf00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000bdd1458a6d399c88d4509275e4463485c6c86ef300000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000009657865637574652829000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001, messageNonce: 1766847064778384329583297500742918515827483896875618958121606201292648141, gasLimit: 1900000)`
    - `SentMessageExtension1(sender: 0xee56e2b3d491590b5b31738cc34d5232f378a8d5, value: 0)`

#### Check all targets are verified on Etherscan ✅ Passed

Info:

- Targets:
  - 0x3215225538da1546FE0DA88ee13019f402078942: Contract (not verified)

#### Check all touched contracts are verified on Etherscan ✅ Passed

Info:

- Touched address:
  - 0xd73a92be73efbfcf3854433a5fcbabf9c1316073: EOA (verification not applicable)
  - 0xec568fffba86c094cf06b22134b23074dfe2252c: Contract (verified) (AaveGovernanceV2)
  - 0xee56e2b3d491590b5b31738cc34d5232f378a8d5: Contract (verified) (Executor)
  - 0xb7e383ef9b1e9189fc0f71fb30af8aa14377429e: Contract (verified) (GovernanceStrategy)
  - 0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9: Contract (verified) (InitializableAdminUpgradeabilityProxy)
  - 0x96f68837877fd0414b55050c9e794aecdbcfca59: Contract (verified) (AaveTokenV2)
  - 0x3215225538da1546fe0da88ee13019f402078942: Contract (verified) (CrosschainForwarderBase)
  - 0x866e82a600a1414e583f7f13623f1ac5d58b0afa: Contract (verified) (ResolvedDelegateProxy)
  - 0x8efb6b5c4767b09dc9aa6af4eaa89f749522bae2: Contract (verified) (AddressManager)
  - 0x81c4bd600793ebd1c0323604e1f455fe50a951f8: Contract (verified) (L1CrossDomainMessenger)
  - 0x49048044d57e1c92a77f79988d21fa8faf74e97e: Contract (verified) (Proxy)
  - 0x5fb30336a8d0841cf15d452afa297cb6d10877d7: Contract (verified) (OptimismPortal)
  - 0x73a79fab69143498ed3712e519a88a918e1f4072: Contract (not verified)
  - 0x6481ff79597fe4f77e1063f615ec5bdaddeffd4b: Contract (verified) (SystemConfig)

#### Runs solc against the verified contracts ✅ Passed

Info:

-

<details>
<summary>View Details</summary>
<details>
<summary>View warnings for CrosschainForwarderBase at `0x3215225538da1546FE0DA88ee13019f402078942`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for Proxy at `0x49048044D57e1C92A77f79988d21Fa8fAF74E97e` with implementation OptimismPortal at `0x5FB30336A8d0841cf15d452afA297cB6D10877D7`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for OptimismPortal at `0x5FB30336A8d0841cf15d452afA297cB6D10877D7`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for SystemConfig at `0x6481ff79597Fe4F77E1063f615ec5BDaDDEFfd4B`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for InitializableAdminUpgradeabilityProxy (Aave) at `0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9` with implementation AaveTokenV2 at `0x96F68837877fd0414B55050c9e794AECdBcfCA59`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for L1CrossDomainMessenger at `0x81C4Bd600793EBd1C0323604E1F455fE50A951F8`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for ResolvedDelegateProxy at `0x866E82a600A1414e583f7F13623F1aC5d58b0Afa`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for AddressManager at `0x8EfB6B5c4767B09Dc9AA6Af4eAA89F749522BaE2`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for AaveTokenV2 at `0x96F68837877fd0414B55050c9e794AECdBcfCA59`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for GovernanceStrategy at `0xb7e383ef9B1E9189Fc0F71fb30af8aa14377429e`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

</details>

#### Runs slither against the verified contracts ✅ Passed

Info:

-

<details>
<summary>View Details</summary>

<details>
<summary>Slither report for CrosschainForwarderBase at `0x3215225538da1546FE0DA88ee13019f402078942`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for Proxy at `0x49048044D57e1C92A77f79988d21Fa8fAF74E97e` with implementation OptimismPortal at `0x5FB30336A8d0841cf15d452afA297cB6D10877D7`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for OptimismPortal at `0x5FB30336A8d0841cf15d452afA297cB6D10877D7`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for SystemConfig at `0x6481ff79597Fe4F77E1063f615ec5BDaDDEFfd4B`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for InitializableAdminUpgradeabilityProxy (Aave) at `0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9` with implementation AaveTokenV2 at `0x96F68837877fd0414B55050c9e794AECdBcfCA59`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for L1CrossDomainMessenger at `0x81C4Bd600793EBd1C0323604E1F455fE50A951F8`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for ResolvedDelegateProxy at `0x866E82a600A1414e583f7F13623F1aC5d58b0Afa`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for AddressManager at `0x8EfB6B5c4767B09Dc9AA6Af4eAA89F749522BaE2`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for AaveTokenV2 at `0x96F68837877fd0414B55050c9e794AECdBcfCA59`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for GovernanceStrategy at `0xb7e383ef9B1E9189Fc0F71fb30af8aa14377429e`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

</details>
