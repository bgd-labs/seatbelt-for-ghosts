## Chaos Labs V2 to V3 Migration Next Steps

- ID: 252
- Proposer: [0x329c54289Ff5D6B7b7daE13592C6B1EDA1543eD4](https://etherscan.io/address/0x329c54289Ff5D6B7b7daE13592C6B1EDA1543eD4)
- Targets: [0xc1A6036b2915c0c151d8761b5D70e51726bA306f](https://etherscan.io/address/0xc1A6036b2915c0c151d8761b5D70e51726bA306f#code)
- Executor: [0xEE56e2B3D491590B5b31738cC34d5232F378a8D5](https://etherscan.io/address/0xEE56e2B3D491590B5b31738cC34d5232F378a8D5) (Short executor)
- Simulation: [https://dashboard.tenderly.co/me/simulator/f27fc973-3e3e-4f85-a993-473b220cfea1](https://dashboard.tenderly.co/me/simulator/f27fc973-3e3e-4f85-a993-473b220cfea1)

<details>
  <summary>Proposal text</summary>

## Simple Summary

This AIP proposes to Freeze the the 1INCH, ENS, LINK, MKR, SNX & UNI reserves on the Aave V2 Ethereum pool

## Motivation

Following the successful deployment of Aave V3 on the Ethereum network, we propose a reassessment of smaller-to-medium capitalization tokens. Unlike CRV (we will soon contribute further insights on this topic, as the complexity of the CRV market, primarily due to its substantial scale, warrants a more nuanced examination), these markets exhibit a more modest size and generally can be conveniently migrated. This diverges from preceding deliberations on market freezes prior to the V3 launch. With V3 live, invoking a freeze on V2 markets does not preclude users from capitalizing on these markets. Instead, it enhances the community’s capacity to safeguard user funds more effectively, as V3’s advanced risk management mechanisms provide a more secure environment. This proactive strategy aims to enforce a freeze on low-to-medium capital assets on V2, thereby averting a scenario resembling Aave V2’s current overexposure to CRV while permitting users to engage with Aave via V3 markets.

## Specification

This AIP will call freezeReserve() method from the Aave V2 Pool Configurator contract for the following assets: 1INCH, ENS, LINK, MKR, SNX & UNI

```solidity
contract AaveV2FreezeReserves_20230619 is IProposalGenericExecutor {
  address public constant ONEINCH = AaveV2EthereumAssets.ONE_INCH_UNDERLYING;
  address public constant ENS = AaveV2EthereumAssets.ENS_UNDERLYING;
  address public constant LINK = AaveV2EthereumAssets.LINK_UNDERLYING;
  address public constant MKR = AaveV2EthereumAssets.MKR_UNDERLYING;
  address public constant SNX = AaveV2EthereumAssets.SNX_UNDERLYING;
  address public constant UNI = AaveV2EthereumAssets.UNI_UNDERLYING;


  function execute() external {
    AaveV2Ethereum.POOL_CONFIGURATOR.freezeReserve(ONEINCH);
    AaveV2Ethereum.POOL_CONFIGURATOR.freezeReserve(ENS);
    AaveV2Ethereum.POOL_CONFIGURATOR.freezeReserve(LINK);
    AaveV2Ethereum.POOL_CONFIGURATOR.freezeReserve(MKR);
    AaveV2Ethereum.POOL_CONFIGURATOR.freezeReserve(SNX);
    AaveV2Ethereum.POOL_CONFIGURATOR.freezeReserve(UNI);
  }
}
```

## References

- [proposalCode](https://github.com/bgd-labs/aave-proposals/blob/main/src/AaveV2FreezeReserves_20230619/AaveV2FreezeReserves_20230619.sol)

## Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).

</details>

### Checks

#### Reports all state changes from the proposal ✅ Passed

Info:

- State changes:

```diff
# InitializableImmutableAdminUpgradeabilityProxy at `0x7d2768dE32b0b80b7a3454c06BdAc94A69DDc7A9` with implementation LendingPool at `0xC6845a5C768BF8D7681249f8927877Efda425baf`
@@ `_reserves` key `0x111111111117dc0aa78b770fa6a738034120c302`.configuration.data @@
- 36893565318163444797344
+ 36893709433351520653216

# decoded configuration.data for key `0x111111111117dc0aa78b770fa6a738034120c302` (symbol: 1INCH)
@@ configuration.data.frozen @@
- false
+ true

@@ `_reserves` key `0x1f9840a85d5af5bf1d1762f925bdaddc4201f984`.configuration.data @@
- 36893565318378370111844
+ 36893709433566445967716

# decoded configuration.data for key `0x1f9840a85d5af5bf1d1762f925bdaddc4201f984` (symbol: UNI)
@@ configuration.data.frozen @@
- false
+ true

@@ `_reserves` key `0x514910771af9ca656af840dff83e8264ecf986ca`.configuration.data @@
- 36894141778271719398232
+ 36894285893459795254104

# decoded configuration.data for key `0x514910771af9ca656af840dff83e8264ecf986ca` (symbol: LINK)
@@ configuration.data.frozen @@
- false
+ true

@@ `_reserves` key `0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2`.configuration.data @@
- 36894141778486343243532
+ 36894285893674419099404

# decoded configuration.data for key `0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2` (symbol: unknown)
@@ configuration.data.frozen @@
- false
+ true

@@ `_reserves` key `0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f`.configuration.data @@
- 64563681428298354135544
+ 64563825543486429991416

# decoded configuration.data for key `0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f` (symbol: SNX)
@@ configuration.data.frozen @@
- false
+ true

@@ `_reserves` key `0xc18360217d8f7ab5e7c516566761ea12ce7f9d72`.configuration.data @@
- 36893565317948742308444
+ 36893709433136818164316

# decoded configuration.data for key `0xc18360217d8f7ab5e7c516566761ea12ce7f9d72` (symbol: ENS)
@@ configuration.data.frozen @@
- false
+ true

```

#### Check stack trace of the proposal ✅ Passed

Info:

- There is no SELFDESTRUCT inside of delegated call

#### Reports all events emitted from the proposal ✅ Passed

Info:

- Events Emitted:
  - InitializableImmutableAdminUpgradeabilityProxy at `0x311Bb771e4F8952E6Da169b425E7e92d6Ac45756` with implementation LendingPoolConfigurator at `0x3a95Ee42f080ff7289C8B4a14EB483a8644d7521`
    - `ReserveFrozen(asset: 0x111111111117dc0aa78b770fa6a738034120c302)`
    - `ReserveFrozen(asset: 0xc18360217d8f7ab5e7c516566761ea12ce7f9d72)`
    - `ReserveFrozen(asset: 0x514910771af9ca656af840dff83e8264ecf986ca)`
    - `ReserveFrozen(asset: 0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2)`
    - `ReserveFrozen(asset: 0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f)`
    - `ReserveFrozen(asset: 0x1f9840a85d5af5bf1d1762f925bdaddc4201f984)`

#### Check all targets are verified on Etherscan ✅ Passed

Info:

- Targets:
  - 0xc1A6036b2915c0c151d8761b5D70e51726bA306f: Contract (not verified)

#### Check all touched contracts are verified on Etherscan ✅ Passed

Info:

- Touched address:
  - 0xd73a92be73efbfcf3854433a5fcbabf9c1316073: EOA (verification not applicable)
  - 0xec568fffba86c094cf06b22134b23074dfe2252c: Contract (verified) (AaveGovernanceV2)
  - 0xee56e2b3d491590b5b31738cc34d5232f378a8d5: Contract (verified) (Executor)
  - 0xb7e383ef9b1e9189fc0f71fb30af8aa14377429e: Contract (verified) (GovernanceStrategy)
  - 0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9: Contract (verified) (InitializableAdminUpgradeabilityProxy)
  - 0x96f68837877fd0414b55050c9e794aecdbcfca59: Contract (verified) (AaveTokenV2)
  - 0xc1a6036b2915c0c151d8761b5d70e51726ba306f: Contract (not verified)
  - 0x311bb771e4f8952e6da169b425e7e92d6ac45756: Contract (verified) (InitializableImmutableAdminUpgradeabilityProxy)
  - 0x3a95ee42f080ff7289c8b4a14eb483a8644d7521: Contract (verified) (LendingPoolConfigurator)
  - 0xb53c1a33016b2dc2ff3653530bff1848a515c8c5: Contract (verified) (LendingPoolAddressesProvider)
  - 0x7d2768de32b0b80b7a3454c06bdac94a69ddc7a9: Contract (verified) (InitializableImmutableAdminUpgradeabilityProxy)
  - 0xc6845a5c768bf8d7681249f8927877efda425baf: Contract (verified) (LendingPool)

#### Runs solc against the verified contracts ✅ Passed

Info:

-

<details>
<summary>View Details</summary>
<details>
<summary>View warnings for InitializableImmutableAdminUpgradeabilityProxy at `0x311Bb771e4F8952E6Da169b425E7e92d6Ac45756` with implementation LendingPoolConfigurator at `0x3a95Ee42f080ff7289C8B4a14EB483a8644d7521`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for LendingPoolConfigurator at `0x3a95Ee42f080ff7289C8B4a14EB483a8644d7521`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for InitializableImmutableAdminUpgradeabilityProxy at `0x7d2768dE32b0b80b7a3454c06BdAc94A69DDc7A9` with implementation LendingPool at `0xC6845a5C768BF8D7681249f8927877Efda425baf`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for InitializableAdminUpgradeabilityProxy at `0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9` with implementation AaveTokenV2 at `0x96F68837877fd0414B55050c9e794AECdBcfCA59`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for AaveTokenV2 at `0x96F68837877fd0414B55050c9e794AECdBcfCA59`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for LendingPoolAddressesProvider at `0xB53C1a33016B2DC2fF3653530bfF1848a515c8c5`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for GovernanceStrategy at `0xb7e383ef9B1E9189Fc0F71fb30af8aa14377429e`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

<details>
<summary>View warnings for LendingPool at `0xC6845a5C768BF8D7681249f8927877Efda425baf`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/crytic-compile", line 5, in <module>
    from crytic_compile.__main__ import main
ModuleNotFoundError: No module named 'crytic_compile'
```

</details>

</details>

#### Runs slither against the verified contracts ✅ Passed

Info:

-

<details>
<summary>View Details</summary>

<details>
<summary>Slither report for InitializableImmutableAdminUpgradeabilityProxy at `0x311Bb771e4F8952E6Da169b425E7e92d6Ac45756` with implementation LendingPoolConfigurator at `0x3a95Ee42f080ff7289C8B4a14EB483a8644d7521`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for LendingPoolConfigurator at `0x3a95Ee42f080ff7289C8B4a14EB483a8644d7521`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for InitializableImmutableAdminUpgradeabilityProxy at `0x7d2768dE32b0b80b7a3454c06BdAc94A69DDc7A9` with implementation LendingPool at `0xC6845a5C768BF8D7681249f8927877Efda425baf`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for InitializableAdminUpgradeabilityProxy at `0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9` with implementation AaveTokenV2 at `0x96F68837877fd0414B55050c9e794AECdBcfCA59`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for AaveTokenV2 at `0x96F68837877fd0414B55050c9e794AECdBcfCA59`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for LendingPoolAddressesProvider at `0xB53C1a33016B2DC2fF3653530bfF1848a515c8c5`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for GovernanceStrategy at `0xb7e383ef9B1E9189Fc0F71fb30af8aa14377429e`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

<details>
<summary>Slither report for LendingPool at `0xC6845a5C768BF8D7681249f8927877Efda425baf`</summary>

```
Traceback (most recent call last):
  File "/home/sakulstra/.local/bin/slither", line 5, in <module>
    from slither.__main__ import main
ModuleNotFoundError: No module named 'slither'
```

</details>

</details>
